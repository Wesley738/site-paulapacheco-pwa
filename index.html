<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>+ Clareza</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" href="favicon-32x32.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">

  <link rel="stylesheet" href="styles.css">

  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#000000"/>
  <!-- Auth0 JS SDK -->
  <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
  <script>
    let auth0 = null;
    const config = {
      domain: "dev-8i4y2qbymuxpjob4.us.auth0.com",
      clientId: "Tm3AR9AxRlFwl4VfDLqqJm7OO6H8hZmb"
    };

    async function initAuth() {
      auth0 = await createAuth0Client(config);

      const isAuthenticated = await auth0.isAuthenticated();
      if (isAuthenticated) {
        const user = await auth0.getUser();
        verificarAcesso(user.email);
        return;
      }

      const query = window.location.search;
      if (query.includes("code=") && query.includes("state=")) {
        await auth0.handleRedirectCallback();
        const user = await auth0.getUser();
        verificarAcesso(user.email);
      }
    }

    async function login() {
      await auth0.loginWithRedirect({
        redirect_uri: window.location.origin
      });
    }

    async function logout() {
      auth0.logout({ returnTo: window.location.origin });
    }

    window.onload = initAuth;
  </script>
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(registration => {
          console.log('Service Worker registrado!', registration);
        });
    });
  }
  </script>
</head>
<body>
  <div id="login-box">
    <h2>ğŸ” Entrar no Sistema</h2>
    <input type="email" id="emailInput" placeholder="Digite seu e-mail" />
    <button onclick="verificarEmail()" id="btn-login">
      <span id="btn-login-texto">Entrar</span>
      <span class="spinner" id="spinner-login" style="display: none;"></span>
    </button>
    <p id="mensagemErro" style="color:red;"></p>
  </div>
  <div id="conteudo" style="display: none;">
  <!-- Barra Superior Fixa -->
  <header class="barra-superior">
    <!-- Logo centralizado -->
    <div class="logo-container">
      <img src="logo.png" alt="Logo +Clareza" class="logo">
    </div>
  </header>


    <section id="metas">
      <h1>ğŸ“‹ Metas</h1>

      <div class="caixa-instrucoes">
        <p>ğŸ“Œ <strong>Como usar:</strong> Defina metas para cada pilar e perÃ­odo. Clique na caixinha cinza quando concluir. Se quiser editar a atividade clique em âœï¸. Se quiser apagar, clique em ğŸ—‘ï¸</p>
      </div>
      
      <!-- FormulÃ¡rio para adicionar nova meta -->
      <div class="adicionar-meta">
        <div class="seletores-container">
          <textarea id="nova-meta" rows="1" placeholder="Digite sua meta..."></textarea>
        
          <select id="pilar">
            <option value="saude-fisica">ğŸ’ª SaÃºde FÃ­sica</option>
            <option value="saude-espiritual">ğŸ§˜ SaÃºde Espiritual</option>
            <option value="estudos">ğŸ“š Estudos</option>
            <option value="familia">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Relacionamentos</option>
            <option value="trabalho">ğŸ’¼ Trabalho</option>
          </select>
          
          <select id="periodo">
            <option value="semanal">ğŸ“… Semanal</option>
            <option value="mensal">ğŸ—“ï¸ Mensal</option>
            <option value="trimestral">â±ï¸ Trimestral</option>
            <option value="anual">ğŸ“… Anual</option>
          </select>
        </div>
        
        <button id="btn-adicionar">+</button>
      </div>

      <!-- Container das metas organizadas por perÃ­odo -->
      <div class="metas-container">
        <!-- Semanais -->
        <div class="periodo-container" id="semanais-container">
          <h2>ğŸ“… Metas Semanais</h2>
          <div class="lista-metas" data-periodo="semanal"></div>
        </div>
        
        <!-- Mensais -->
        <div class="periodo-container" id="mensais-container">
          <h2>ğŸ—“ï¸ Metas Mensais</h2>
          <div class="lista-metas" data-periodo="mensal"></div>
        </div>
        
        <!-- Trimestrais -->
        <div class="periodo-container" id="trimestrais-container">
          <h2>â±ï¸ Metas Trimestrais</h2>
          <div class="lista-metas" data-periodo="trimestral"></div>
        </div>
        
        <!-- Anuais -->
        <div class="periodo-container" id="anuais-container">
          <h2>ğŸ“… Metas Anuais</h2>
          <div class="lista-metas" data-periodo="anual"></div>
        </div>
      </div>
      
      <div class="limpar-container">
        <button id="limpar-concluidas">ğŸ—‘ï¸ Limpar Todas ConcluÃ­das</button>
      </div>
    </section>
    <section id="prioridades" style="display: none;">
      <h1>ğŸ¯ Comece seu dia com Clareza</h1>
      <div class="caixa-instrucoes">
        <p>ğŸ“Œ <strong>Como usar:</strong> Defina prioridades, ou seja, atividades que nÃ£o pode deixar de realizar no dia.
        Clique em âœ… para confirmar a prioridade. Para editar, clique em âœï¸.
        No Ato Heroico descreva uma atitude difÃ­cil que irÃ¡ tomar, quer fazer algo ou deixar de fazer algo. No botÃ£o ğŸ’£ vocÃª pode limpar os relatÃ³rios e assim economizar armazenamento no seu dispositivo</p>
      </div>
      <div class="prioridade-container">
          <!-- Prioridade 1 -->
          <div class="prioridade-item">
            <span class="numero-prioridade">1</span>
            <textarea class="input-prioridade auto-ajuste" id="prioridade-1" rows="2" placeholder="Prioridade #1"></textarea>
            <div class="acoes-prioridade">
              <button class="btn-concluir">âœ…</button>
              <button class="btn-editar" style="display: none;">âœï¸</button>
            </div>
          </div>
          
          <!-- Prioridade 2 -->
          <div class="prioridade-item">
            <span class="numero-prioridade">2</span>
            <textarea class="input-prioridade auto-ajuste" id="prioridade-2" rows="2" placeholder="Prioridade #2"></textarea>
            <div class="acoes-prioridade">
              <button class="btn-concluir">âœ…</button>
              <button class="btn-editar" style="display: none;">âœï¸</button>
            </div>
          </div>
          
          <!-- Prioridade 3 -->
          <div class="prioridade-item">
            <span class="numero-prioridade">3</span>
            <textarea class="input-prioridade auto-ajuste" id="prioridade-3" rows="2" placeholder="Prioridade #3"></textarea>
            <div class="acoes-prioridade">
              <button class="btn-concluir">âœ…</button>
              <button class="btn-editar" style="display: none;">âœï¸</button>
            </div>
          </div>
          
          <!-- Ato HerÃ³ico -->
          <div class="ato-heroico">
            <h3>ğŸ† Ato Heroico de Hoje</h3>
            <div class="ato-heroico-container">
              <textarea id="ato-heroico-texto" placeholder="Qual serÃ¡ seu ato heroico hoje?" class="input-ato-heroico"></textarea>
              <div class="ato-heroico-botoes">
                <button class="btn-concluir-ato" id="btn-concluir-ato">âœ… Concluir</button>
                <button class="btn-editar-ato" id="btn-editar-ato" style="display: none;">âœï¸ Editar</button>
              </div>
            </div>
            
            <div class="confirmacao-ato" id="confirmacao-ato" style="display: none;">
              <p>VocÃª conseguiu realizar esse ato heroico?</p>
              <div class="botoes-confirmacao">
                <button class="btn-sim" id="btn-sim">ğŸ‘ Sim</button>
                <button class="btn-nao" id="btn-nao">ğŸ‘ NÃ£o</button>
              </div>
            </div>
            
            <!-- BotÃ£o para limpar os relatÃ³rios de Ato Heroico -->
            <div class="limpar-container">
              <button id="btn-limpar-ato-heroico" title="Zerar atos heroicos">ğŸ’£</button>
            </div>
            <div id="relatorios-ato-heroico" class="relatorios-container">
              <!-- RelatÃ³rios serÃ£o inseridos aqui dinamicamente -->
            </div>
          </div>
      </div>
    </section>
    <section id="checklist" style="display: none;">
      <h1>âœ… Checklist</h1>
      <div class="caixa-instrucoes">
        <p>ğŸ“Œ <strong>Como usar:</strong> Clique em "Adicionar Tarefa" para adicionar uma tarefa a ser realizada no dia. HÃ¡ atividades de exemplo, mas pode editar ou apagar se quiser.
        Clique na caixinha cinza quando concluir. Se quiser editar a atividade clique em âœï¸. Se quiser apagar, clique em ğŸ—‘ï¸</p>
      </div>
      <div class="checklist-container">
        <ul class="tarefas-lista" id="lista-tarefas">
          <!-- DinÃ¢mico via JS -->
        </ul>
        
        <div class="acoes-checklist">
          <button id="btn-add-tarefa">â• Adicionar Tarefa</button>
          <button id="btn-limpar-concluidas">ğŸ—‘ï¸ Limpar ConcluÃ­das</button>
        </div>
      </div>
    </section>

    <!-- SeÃ§Ã£o ReflexÃ£o -->
    <section id="reflexao">
      <h1>ğŸ’­ ReflexÃ£o</h1>
      <div class="caixa-instrucoes">
        <p>ğŸ“Œ <strong>Como usar:</strong> Lembre de coisas que gostaria de agradecer no dia. Abaixo, defina acertos e erros do dia.
        Quando preencher, clique em "âœ… ConcluÃ­do". Se quiser editar, clique em "âœï¸ Editar". 
        Quando terminar de preencher as caixas clique em "ğŸ’¯ Concluir DiagnÃ³stico", entÃ£o serÃ¡ gerado um diagnÃ³stico do dia abaixo, onde pode sempre rever futuramente.
      No botÃ£o ğŸ’£ vocÃª pode limpar os diagnÃ³sticos gerados e assim economizar armazenamento no seu dispositivo</p>
      </div>
      <div class="diagnostico-caixa">
        <div class="diagnostico-cabecalho">
          <h2>ğŸ™ Agradecimentos</h2>
          <div class="diagnostico-botoes">
            <!-- BotÃ£o de Concluir VISÃVEL por padrÃ£o -->
            <button class="btn-concluir-diagnostico" id="btn-concluir-agradecimentos" >âœ… ConcluÃ­do</button>
            <!-- BotÃ£o de Editar OCULTO por padrÃ£o -->
            <button class="btn-editar-diagnostico" id="btn-editar-agradecimentos" style="display: none;">âœï¸ Editar</button>
          </div>
        </div>
        <textarea id="agradecimentos" placeholder="Pelo que vocÃª Ã© grato hoje?"></textarea>
      </div>

      <div class="diagnostico-caixa">
        <div class="diagnostico-cabecalho">
          <h2>ğŸ” Pontos Fortes e Fracos</h2>
          <div class="diagnostico-botoes">
            <!-- BotÃ£o de Concluir VISÃVEL por padrÃ£o -->
            <button class="btn-concluir-diagnostico" id="btn-concluir-melhorias">âœ… ConcluÃ­do</button>
            <!-- BotÃ£o de Editar OCULTO por padrÃ£o -->
            <button class="btn-editar-diagnostico" id="btn-editar-melhorias" style="display: none;">âœï¸ Editar</button>
          </div>
        </div>
        <textarea id="melhorias" placeholder="O que fiz de Bom? O que fiz de Ruim? O que posso melhorar amanhÃ£?"></textarea>
      </div>

      <div class="diagnostico-acoes">
        <button id="btn-finalizar-diagnostico">ğŸ’¯ Concluir DiagnÃ³stico</button>
      </div>

      <!-- BotÃ£o Flutuante Limpar Tudo -->
      <button id="btn-nuclear" title="Zerar diagnÃ³sticos">ğŸ’£</button>

      <!-- Container de RelatÃ³rios -->
      <div id="container-diagnosticos">
        <!-- Os relatÃ³rios serÃ£o gerados aqui dinamicamente -->
      </div>
    </section>
    <!-- SeÃ§Ã£o Leitura -->
    <section id="leitura" style="display: none;">
      <h1>ğŸ“š Leitura</h1>
      <div class="caixa-instrucoes">
        <p>ğŸ“Œ <strong>Como usar:</strong> Adicione os livros que estÃ¡ lendo com as datas de inÃ­cio e meta de tÃ©rmino. 
        Quando terminar, preencha a data de conclusÃ£o para comparar com sua meta. Clique em âœï¸ para editar ou ğŸ—‘ï¸ para remover.
      No botÃ£o ğŸ’£ vocÃª pode limpar os livros adicionados e assim economizar armazenamento no seu dispositivo</p>
      </div>
      
      <!-- FormulÃ¡rio para adicionar novo livro -->
      <div class="adicionar-livro">
        <div class="grupo-leitura">
          <input type="text" id="titulo-livro" placeholder="TÃ­tulo do Livro" class="input-livro">
          <div class="data-container">
            <input type="date" id="data-inicio" class="input-livro hoje">
            <span class="data-legenda">Data de inÃ­cio da leitura</span>
          </div>
          <div class="data-container">
            <input type="date" id="data-meta" class="input-livro">
            <span class="data-legenda">Meta de tÃ©rmino</span>
          </div>
          <button id="btn-adicionar-livro">+ Adicionar</button>
        </div>
      </div>
      
      <!-- Lista de livros -->
      <div class="lista-livros" id="lista-livros">
        <!-- DinÃ¢mico (gerado via JavaScript) -->
      </div>
      <button id="btn-limpar-livros" title="Limpar todos os livros">ğŸ’£</button>
      
      <!-- Modal para marcar como concluÃ­do -->
      <div class="modal-conclusao" id="modal-conclusao" style="display: none;">
        <div class="modal-conteudo">
          <h3>Concluir Livro: <span id="modal-titulo-livro"></span></h3>
          <label for="data-conclusao">Data de ConclusÃ£o:</label>
          <input type="date" id="data-conclusao">
          <div class="modal-botoes">
            <button id="btn-confirmar-conclusao">âœ… Confirmar</button>
            <button id="btn-cancelar-conclusao">âŒ Cancelar</button>
          </div>
        </div>
      </div>
    </section>
    <!-- Barra de NavegaÃ§Ã£o (Instagram Style) -->
      <nav class="nav-inferior">
          <a href="#metas" class="nav-item">
              <span>ğŸ“…</span>
              <span class="nav-texto">Metas Gerais</span>
          </a>
          <a href="#prioridades" class="nav-item">
              <span>ğŸ¯</span>
              <span class="nav-texto">Prioridades</span>
          </a>
          <a href="#checklist" class="nav-item">
              <span>âœ…</span>
              <span class="nav-texto">Checklist</span>
          </a>
          <a href="#leitura" class="nav-item">
              <span>ğŸ“š</span>
              <span class="nav-texto">Leitura</span>
          </a>
          <a href="#reflexao" class="nav-item">
              <span>ğŸ’­</span>
              <span class="nav-texto">ReflexÃ£o</span>
          </a>
      </nav>
    <script src="script.js"></script>
  </div>
</body>
</html>